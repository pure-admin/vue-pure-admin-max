var bt=Object.defineProperty,yt=Object.defineProperties;var xt=Object.getOwnPropertyDescriptors;var Ke=Object.getOwnPropertySymbols;var Ct=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable;var Ue=(e,n,a)=>n in e?bt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,ue=(e,n)=>{for(var a in n||(n={}))Ct.call(n,a)&&Ue(e,a,n[a]);if(Ke)for(var a of Ke(n))kt.call(n,a)&&Ue(e,a,n[a]);return e},we=(e,n)=>yt(e,xt(n));import{d as ae,b6 as ve,a as I,a$ as st,e as T,f as M,g as K,aK as ut,l as it,w as q,M as U,aL as Mt,bp as St,u as o,T as rt,b9 as j,p as Be,m as Ie,x as ce,y as We,i as E,k as Y,v as de,h as X,a4 as Le,t as $e,J as fe,n as Ae,b as oe,F as Ye,eb as wt,eK as Ze,bd as J,r as Xe,s as be,ag as It,z as Wt,A as Ge,$ as Rt,j as Qe,eH as _t,H as Ht,_ as Pt}from"./index-DNMha_ID.js";import{useDict as Ot}from"./hook-Dwwg6emr.js";import{R as Bt}from"./index-CLlMPRwU.js";import{u as Pe}from"./hooks-CtSj0m1f.js";import{D as Lt}from"./delete-rGa8zest.js";import{E as $t}from"./edit-pen-Bt2MjxaG.js";import{A as At}from"./add-circle-line-DW4f5Q1w.js";import"./dict.vue_vue_type_script_setup_true_lang-DXYSb99u.js";import"./index-DvV4WFSn.js";import"./rule-DLG-oC5W.js";import"./index-JtlffB1X.js";import"./hooks-vdtcHUM6.js";import"./system-GY6yDmJH.js";let ie=null;function Tt(){return ie!==null}function jt(e){ie&&ct(),ie=e}function Je(e){e===ie&&(ie=null)}function ct(){ie&&(ie.closeMenu(),ie=null)}const ne={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultZoom:1,defaultAdjustPadding:{x:0,y:10}};function xe(e,n){let a=e.offsetTop;return e.offsetParent!=null&&e.offsetParent!=n&&(a-=e.offsetParent.scrollTop,a+=xe(e.offsetParent,n)),a}function Ce(e,n){let a=e.offsetLeft;return e.offsetParent!=null&&e.offsetParent!=n&&(a-=e.offsetParent.scrollLeft,a+=Ce(e.offsetParent,n)),a}function Ft(e,n,a,u){return{x:Ce(e,u)+n,y:xe(e,u)+a}}const Oe="mx-menu-default-container",zt="mx-menu-container-";let Dt=0;function dt(e){const{getContainer:n,zIndex:a}=e;if(n){const f=typeof n=="function"?n():n;if(f){let t=f.getAttribute("id");return t||(t=zt+Dt++,f.setAttribute("id",t)),{eleId:t,container:f,isNew:!1}}}let u=document.getElementById(Oe);return u||(u=document.createElement("div"),u.setAttribute("id",Oe),u.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(u)),u.style.zIndex=(a==null?void 0:a.toString())||ne.defaultZindex.toString(),{eleId:Oe,container:u,isNew:!0}}function Et(e){let n=0;for(let a=0;a<e.length;a++){const u=e.charCodeAt(a);n=(n<<5)-n+u,n|=0}return n}function qe(e){return typeof e=="number"?`${e}px`:e}const le=ae({props:{vnode:{type:null},data:{type:null,default:null}},setup(e){const{vnode:n,data:a}=ve(e);return()=>typeof n.value=="function"?n.value(a.value):n.value}});function Nt(e,n){const a=ue({},e);return delete a[n],a}var Vt=Object.defineProperty,Kt=(e,n,a)=>n in e?Vt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,et=(e,n,a)=>Kt(e,typeof n!="symbol"?n+"":n,a);class tt{constructor(n,a){et(this,"x",0),et(this,"y",0),this.x=n||0,this.y=a||0}set(n,a){this.x=n,this.y=a}substract(n){this.x-=n.x,this.y-=n.y}}function lt(e){const{onDown:n,onMove:a,onUp:u}=e,f=new tt,t=new tt;let S;function c(b){b.stopPropagation(),t.set(b.x,b.y),t.substract(f),a(f,t,b,S)}function x(b){u(b,S),f.set(0,0),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",x)}return(b,C)=>n(b,C)?(S=C,f.set(b.x,b.y),document.addEventListener("mousemove",c),document.addEventListener("mouseup",x),b.stopPropagation(),!0):!1}function Ut(e,n){let a=0;return{start(){a>0&&clearInterval(a),a=setInterval(()=>{a=0,n()},e)},stop(){a>0&&(clearInterval(a),a=0)}}}const ye=[],nt=Ut(100,()=>{for(const e of ye)e()});function Yt(e,n,a,u){let f=0,t=0;function S(){e.value&&(n&&f!==e.value.offsetWidth&&n(e.value.offsetWidth),a&&t!==e.value.offsetHeight&&a(e.value.offsetHeight),f=e.value.offsetWidth,t=e.value.offsetHeight)}return{startResizeChecker(){nt.start(),ye.push(S)},stopResizeChecker(){const c=ye.indexOf(S);c>=0&&ye.splice(c,1),ye.length===0&&nt.stop()}}}const ot=140,Zt=70,Xt=ae({__name:"ScrollRect",props:{scroll:{type:String,default:"both"},scrollBarAlwaysShow:{type:Boolean,default:!1},scrollBarBackgroundClickable:{type:Boolean,default:!1},height:{type:Number,default:void 0},width:{type:Number,default:void 0},maxHeight:{type:Number,default:void 0},maxWidth:{type:Number,default:void 0},containerClass:{type:String,default:""},containerStyle:{type:null}},emits:["scroll","resized"],setup(e,{expose:n,emit:a}){const u=e,f=a,t=I(),S=I(),c=I(),x=I(),b=I(),C=I(),P=I(!1),N=Be(()=>u.scroll==="horizontal"||u.scroll==="both"),R=Be(()=>u.scroll==="vertical"||u.scroll==="both"),y=Xe({show:!1,size:0,sizeRaw:0,pos:0}),h=Xe({show:!1,size:0,sizeRaw:0,pos:0});let d=0,p=0,O=0,H=0,B=null;const W={attributes:!0,childList:!0};function r(){if(t.value){if(y.show){const l=t.value.offsetWidth/t.value.scrollWidth;y.sizeRaw=l*t.value.offsetWidth,y.size=l*100,y.pos=t.value.scrollLeft/(t.value.scrollWidth-t.value.offsetWidth)*(100-y.size),l>=1&&(y.show=!1)}if(h.show){const l=t.value.offsetHeight/t.value.scrollHeight;h.sizeRaw=l*t.value.offsetHeight,h.size=l*100,h.pos=t.value.scrollTop/(t.value.scrollHeight-t.value.offsetHeight)*(100-h.size),l>=1&&(h.show=!1)}f("scroll",t.value.scrollLeft,t.value.scrollTop)}}function m(l=!1){if(!t.value)return;let v=N.value,w=R.value;const i=v&&(d!==t.value.scrollWidth||O!==t.value.offsetWidth),re=R&&(p!==t.value.scrollHeight||H!==t.value.offsetHeight);if(!l&&!i&&!re)return;const V=window.getComputedStyle(t.value);(V.overflow==="hidden"||V.overflowX==="hidden")&&(v=!1),(V.overflow==="hidden"||V.overflowY==="hidden")&&(w=!1),y.show=v,h.show=w,r(),O=t.value.offsetWidth,H=t.value.offsetHeight,d=t.value.scrollWidth,p=t.value.scrollHeight,f("resized",d,p)}function F(l){var v;u.scroll=="horizontal"&&(l.deltaMode==0&&((v=t.value)==null||v.scrollTo({left:t.value.scrollLeft+(l.deltaY>0?ot:-140),behavior:"smooth"})),l.preventDefault(),l.stopPropagation())}function g(l){var v;l.deltaMode==0&&((v=t.value)==null||v.scrollTo({left:t.value.scrollLeft+(l.deltaY>0?ot:-140),behavior:"smooth"}),l.preventDefault(),l.stopPropagation())}function $(l){var v;l.deltaMode==0&&((v=t.value)==null||v.scrollTo({top:t.value.scrollTop+(l.deltaY>0?Zt:-70),behavior:"smooth"}),l.preventDefault(),l.stopPropagation())}let z=0,D=0,L=0,k=0;const A=lt({onDown(l){return!c.value||!b.value?!1:(z=l.offsetX,D=l.x-l.offsetX-b.value.offsetLeft,l.preventDefault(),P.value=!0,!0)},onMove(l,v,w){t.value&&c.value&&(ee(w.x-z-D),w.preventDefault(),w.stopPropagation())},onUp(){P.value=!1}}),G=lt({onDown(l){return!x.value||!C.value?!1:(L=l.offsetY,k=l.y-l.offsetY-C.value.offsetTop,l.preventDefault(),P.value=!0,!0)},onMove(l,v,w){t.value&&x.value&&(se(w.y-L-k),w.preventDefault(),w.stopPropagation())},onUp(){P.value=!1}});function Z(l){t.value&&(t.value.scrollLeft=l/100*(t.value.scrollWidth-t.value.offsetWidth))}function Q(l){t.value&&(t.value.scrollLeft=l/100*(t.value.scrollHeight-t.value.offsetHeight))}function ee(l){t.value&&(t.value.scrollLeft=l/(t.value.offsetWidth-y.sizeRaw)*(t.value.scrollWidth-t.value.offsetWidth))}function se(l){t.value&&(t.value.scrollTop=l/(t.value.offsetHeight-h.sizeRaw)*(t.value.scrollHeight-t.value.offsetHeight))}function _(l){u.scrollBarBackgroundClickable&&ee(l.offsetX-y.sizeRaw/2)}function he(l){u.scrollBarBackgroundClickable&&se(l.offsetY-h.sizeRaw/2)}const{startResizeChecker:Me,stopResizeChecker:s}=Yt(t,()=>m(),()=>m());return Ie(()=>{ce(()=>{setTimeout(()=>m(!0),200),m(!0),Me(),B=new MutationObserver(()=>m()),B.observe(t.value,W)})}),We(()=>{s(),B&&(B.disconnect(),B=null)}),n({refreshScrollState(){m(!0)},getScrollContainer(){return t.value},scrollTo(l,v){var w;(w=t.value)==null||w.scrollTo(l,v)},scrollToTop(){var l;(l=t.value)==null||l.scrollTo(0,0)},scrollToBottom(){var l;(l=t.value)==null||l.scrollTo(t.value.scrollWidth,t.value.scrollHeight)}}),(l,v)=>(M(),Y("div",{ref_key:"scrollrect",ref:S,class:de(["vue-scroll-rect",e.scrollBarAlwaysShow?"always-show-scrollbar":"",e.scrollBarBackgroundClickable?"background-clickable":"",P.value?"dragging":""]),style:be({width:e.width?`${e.width}px`:void 0,height:e.height?`${e.height}px`:void 0}),onWheel:F},[X("div",{ref_key:"container",ref:t,class:de(["scroll-content",e.scroll,e.containerClass]),style:be(ue({maxWidth:e.maxWidth?`${e.maxWidth}px`:void 0,maxHeight:e.maxHeight?`${e.maxHeight}px`:void 0},e.containerStyle)),onScroll:r},[U(l.$slots,"default")],38),y.show?U(l.$slots,"scrollBarX",{key:0,scrollBarValue:y,onScroll:Z},()=>[X("div",{ref_key:"scrollBarRefX",ref:c,class:"scrollbar horizontal",onClick:_,onWheel:g},[X("div",{class:"thumb",ref_key:"scrollBarThumbRefX",ref:b,style:be({left:`${y.pos}%`,width:`${y.size}%`}),onMousedown:v[0]||(v[0]=(...w)=>o(A)&&o(A)(...w)),onWheel:g},null,36)],544)]):E("",!0),h.show?U(l.$slots,"scrollBarY",{key:1,scrollBarValue:h,onScroll:Q},()=>[h.show?(M(),Y("div",{key:0,ref_key:"scrollBarRefY",ref:x,class:"scrollbar vertical",onClick:he,onWheel:$},[X("div",{class:"thumb",ref_key:"scrollBarThumbRefY",ref:C,style:be({top:`${h.pos}%`,height:`${h.size}%`}),onMousedown:v[1]||(v[1]=(...w)=>o(G)&&o(G)(...w)),onWheel:$},null,36)],544)):E("",!0)]):E("",!0)],38))}}),Te=(e,n)=>{const a=e.__vccOpts||e;for(const[u,f]of n)a[u]=f;return a},Gt={},Qt={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},Jt=X("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),qt=[Jt];function el(e,n){return M(),Y("svg",Qt,qt)}const tl=Te(Gt,[["render",el]]),ll={},nl={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},ol=X("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),al=[ol];function sl(e,n){return M(),Y("svg",nl,al)}const ul=Te(ll,[["render",sl]]),il={class:"mx-item-row"},rl=["xlink:href"],cl={key:1,class:"label"},dl={class:"mx-item-row"},fl={class:"mx-shortcut"},je=ae({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(e,{expose:n,emit:a}){const u=e,f=a,{clickHandler:t,clickClose:S,clickableWhenHasChildren:c,disabled:x,hidden:b,label:C,icon:P,iconFontClass:N,showRightArrow:R,shortcut:y,hasChildren:h}=ve(u),d=I(!1),p=I(!1),O=I(),H=j("globalOptions"),B=j("globalHasSlot"),W=j("globalRenderSlot"),r=j("globalCloseMenu"),m=j("menuContext"),F=Be(()=>typeof C.value=="string"?C.value:typeof C.value=="function"?Et(C.value.toString()):"MenuItem[unknow]");J("MenuItemName",F);const g={getSubMenuInstance:()=>{},showSubMenu:()=>d.value?(m.markActiveMenuItem(g,!0),!0):h.value?(z(),!0):!1,hideSubMenu:()=>{m.closeOtherSubMenu()},isDisabledOrHidden:()=>x.value||b.value,getElement:()=>O.value,focus:()=>p.value=!0,blur:()=>p.value=!1,click:$};J("menuItemInstance",g),Ie(()=>{m.isMenuItemDataCollectedFlag()?ce(()=>{let k=0;const A=m.getElement();if(A){let G=0;for(let Z=0;Z<A.children.length;Z++){const Q=A.children[Z];if(Q.getAttribute("data-type")==="ContextMenuItem"){if(Q===O.value){k=G;break}G++}}}m.addChildMenuItem(g,k)}):m.addChildMenuItem(g)}),We(()=>{m.removeChildMenuItem(g)});function $(k){if(!x.value){if(k){const A=k.target;if(A.classList.contains("mx-context-no-clickable")||H.value.ignoreClickClassName&&A.classList.contains(H.value.ignoreClickClassName))return;if(H.value.clickCloseClassName&&A.classList.contains(H.value.clickCloseClassName)){k.stopPropagation(),r(u.rawMenuItem);return}}h.value?c.value?(typeof t.value=="function"&&t.value(k),f("click",k)):d.value||z():(typeof t.value=="function"&&t.value(k),f("click",k),S.value&&r(u.rawMenuItem))}}function z(k){p.value=!1,m.checkCloseOtherSubMenuTimeOut()||m.closeOtherSubMenu(),x.value||(m.markActiveMenuItem(g),h.value&&(k||m.markThisOpenedByKeyBoard(),m.addOpenedSubMenu(D),d.value=!0,ce(()=>f("subMenuOpen",g))))}function D(){p.value=!1,d.value=!1,f("subMenuClose",g)}function L(){return{disabled:x.value,label:C.value,icon:P.value,iconFontClass:N.value,showRightArrow:R.value,clickClose:S.value,clickableWhenHasChildren:c.value,shortcut:y.value,theme:H.value.theme,isOpen:d,hasChildren:h,onClick:$,onMouseEnter:z,closeMenu:r}}return n(g),(k,A)=>o(b)?E("",!0):(M(),Y("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:O,"data-type":"ContextMenuItem"},[o(B)("itemRender")?(M(),T(o(le),{key:0,vnode:()=>o(W)("itemRender",L())},null,8,["vnode"])):e.customRender?(M(),T(o(le),{key:1,vnode:e.customRender,data:L()},null,8,["vnode","data"])):(M(),Y("div",{key:2,class:de(["mx-context-menu-item",o(x)?"disabled":"",p.value?"keyboard-focus":"",e.customClass?" "+e.customClass:"",d.value?"open":""]),onClick:$,onMouseenter:z},[U(k.$slots,"default",{},()=>[X("div",il,[X("div",{class:de(["mx-icon-placeholder",e.preserveIconWidth?"preserve-width":""])},[U(k.$slots,"icon",{},()=>[o(B)("itemIconRender")?(M(),T(o(le),{key:0,vnode:()=>o(W)("itemIconRender",L())},null,8,["vnode"])):typeof e.svgIcon=="string"&&e.svgIcon?(M(),Y("svg",Le({key:1,class:"icon svg"},e.svgProps),[X("use",{"xlink:href":e.svgIcon},null,8,rl)],16)):typeof o(P)!="string"?(M(),T(o(le),{key:2,vnode:o(P),data:o(P)},null,8,["vnode","data"])):typeof o(P)=="string"&&o(P)!==""?(M(),Y("i",{key:3,class:de(o(P)+" icon "+o(N)+" "+o(H).iconFontClass)},null,2)):E("",!0)]),e.checked?U(k.$slots,"check",{key:0},()=>[o(B)("itemCheckRender")?(M(),T(o(le),{key:0,vnode:()=>o(W)("itemCheckRender",L())},null,8,["vnode"])):E("",!0),K(tl)]):E("",!0)],2),U(k.$slots,"label",{},()=>[o(B)("itemLabelRender")?(M(),T(o(le),{key:0,vnode:()=>o(W)("itemLabelRender",L())},null,8,["vnode"])):typeof o(C)=="string"?(M(),Y("span",cl,$e(o(C)),1)):(M(),T(o(le),{key:2,vnode:o(C),data:o(C)},null,8,["vnode","data"]))])]),X("div",dl,[o(y)||k.$slots.shortcut?U(k.$slots,"shortcut",{key:0},()=>[o(B)("itemShortcutRender")?(M(),T(o(le),{key:0,vnode:()=>o(W)("itemShortcutRender",L())},null,8,["vnode"])):E("",!0),X("span",fl,$e(o(y)),1)]):E("",!0),o(R)?U(k.$slots,"rightArrow",{key:1},()=>[o(B)("itemRightArrowRender")?(M(),T(o(le),{key:0,vnode:()=>o(W)("itemRightArrowRender",L())},null,8,["vnode"])):E("",!0),K(ul)]):E("",!0)])])],34)),U(k.$slots,"submenu",{context:g,show:d.value})],512))}}),vl=ae({name:"ContextMenuSperator",components:{VNodeRender:le},setup(){const e=j("globalHasSlot"),n=j("globalRenderSlot");return{globalHasSlot:e,globalRenderSlot:n}}}),hl={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function ml(e,n,a,u,f,t){const S=oe("VNodeRender");return e.globalHasSlot("separatorRender")?(M(),T(S,{key:0,vnode:()=>e.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(M(),Y("div",hl))}const ke=Te(vl,[["render",ml]]),Fe=ae({__name:"ContextSubMenu",props:{items:{type:Object,default:null},show:{type:Boolean,default:!1},maxHeight:{type:Number,default:0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"},parentMenuItemContext:{type:Object,default:null}},emits:["closeAnimFinished"],setup(e,{expose:n,emit:a}){const u=e,f=a,t=I(!1),S=j("globalGetMenuHostId",""),c=j("menuContext"),x=j("globalOptions");j("globalHasSlot"),j("globalRenderSlot");const b=I("UnknowOrRoot"),C=j("MenuItemName",b),{zIndex:P,getParentWidth:N,getParentHeight:R,getZoom:y}=c,{adjustPosition:h}=ve(u),d=I(),p=I(),O=I(),H=[],B=j("globalSetCurrentSubMenu"),W=[];let r=null,m=0;function F(){r&&r.blur()}function g(s,l){if(s){for(let v=l!==void 0?l:0;v<W.length;v++)if(!W[v].isDisabledOrHidden()){$(v);break}}else for(let v=l!==void 0?l:W.length-1;v>=0;v--)if(!W[v].isDisabledOrHidden()){$(v);break}}function $(s){if(r&&F(),s!==void 0&&(r=W[Math.max(0,Math.min(s,W.length-1))]),!r)return;r.focus();const l=r.getElement();l&&l.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})}function z(){B(D)}const D={el:O,name:C,isTopLevel:()=>c.getParentContext()===null,closeSelfAndActiveParent:()=>{const s=A.getParentContext();if(s){s.closeOtherSubMenu();const l=s.getSubMenuInstanceContext();if(l)return l.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var s;return(s=A.getParentContext())==null?void 0:s.closeOtherSubMenu()},moveCurrentItemFirst:()=>g(!0),moveCurrentItemLast:()=>g(!1),moveCurrentItemDown:()=>g(!0,r?W.indexOf(r)+1:0),moveCurrentItemUp:()=>g(!1,r?W.indexOf(r)-1:0),focusCurrentItem:()=>$(),openCurrentItemSubMenu:()=>r?r==null?void 0:r.showSubMenu():!1,triggerCurrentItemClick:s=>r==null?void 0:r.click(s)};let L=!1,k=!1;const A={zIndex:P+1,container:c.container,adjustPadding:x.value.adjustPadding||ne.defaultAdjustPadding,getParentWidth:()=>{var s;return((s=O.value)==null?void 0:s.offsetWidth)||0},getParentHeight:()=>{var s;return((s=O.value)==null?void 0:s.offsetHeight)||0},getPositon:()=>[_.value.x,_.value.y],getZoom:()=>x.value.zoom||ne.defaultZoom,addOpenedSubMenu(s){H.push(s)},closeOtherSubMenu(){H.forEach(s=>s()),H.splice(0,H.length),B(D)},checkCloseOtherSubMenuTimeOut(){return m?(clearTimeout(m),m=0,!0):!1},closeOtherSubMenuWithTimeOut(){m=setTimeout(()=>{m=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(s,l)=>{l===void 0?W.push(s):W.splice(l,0,s)},removeChildMenuItem:s=>{W.splice(W.indexOf(s),1),s.getSubMenuInstance=()=>{}},markActiveMenuItem:(s,l=!1)=>{F(),r=s,l&&$()},markThisOpenedByKeyBoard:()=>{L=!0},isOpenedByKeyBoardFlag:()=>L?(L=!1,!0):!1,isMenuItemDataCollectedFlag:()=>k,getElement:()=>O.value||null,getParentContext:()=>c,getSubMenuInstanceContext:()=>D};J("menuContext",A);const G={getChildItem:s=>W[s],getMenuDimensions:()=>p.value?{width:p.value.offsetWidth,height:p.value.offsetHeight}:{width:0,height:0},getSubmenuRoot:()=>p.value,getMenu:()=>O.value,getScrollValue:()=>{var s,l;return((l=(s=d.value)==null?void 0:s.getScrollContainer())==null?void 0:l.scrollTop)||0},setScrollValue:s=>{var l;return(l=d.value)==null?void 0:l.scrollTo(0,s)},getScrollHeight:()=>Q.value,adjustPosition:()=>{he()},getMaxHeight:()=>ee.value,getPosition:()=>_.value,setPosition:(s,l)=>{_.value.x=s,_.value.y=l}},Z=j("menuItemInstance",void 0);Z&&(Z.getSubMenuInstance=()=>G);const Q=I(0),ee=I(0),se=I(!1),_=I({x:0,y:0});function he(){ce(()=>{var v,w;const s=O.value,l=p.value;if(s&&l&&d.value){const{container:i}=c,re=(v=N==null?void 0:N())!=null?v:0,V=(w=R==null?void 0:R())!=null?w:0,te=getComputedStyle(l),Se=parseFloat(te.paddingLeft),me=parseFloat(te.paddingTop),Re=V>0?me:0,vt=document.documentElement.scrollHeight/y(),ht=document.documentElement.scrollWidth/y(),mt=Math.min(ht,i.offsetWidth),ze=Math.min(vt,i.offsetHeight);let _e=Ce(s,i),He=xe(s,i);u.direction.includes("l")?_.value.x-=s.offsetWidth+Se:u.direction.includes("r")?_.value.x+=re+Se:(_.value.x+=re/2,_.value.x-=(s.offsetWidth+Se)/2),u.direction.includes("t")?_.value.y-=(s.offsetHeight+me*2)/y():u.direction.includes("b")?_.value.y-=me/y():_.value.y-=(s.offsetHeight+me)/2/y(),ce(()=>{var De,Ee;_e=Ce(s,i),He=xe(s,i);const Ne=((Ee=(De=d.value)==null?void 0:De.getScrollContainer())==null?void 0:Ee.scrollHeight)||0,pt=u.maxHeight;Q.value=u.maxHeight?Math.min(Ne,u.maxHeight):Ne;const gt=_e+s.offsetWidth-mt,Ve=He+Q.value+Re*2-ze;if(se.value=Ve>0,h.value&&gt>0){const pe=re+s.offsetWidth-Se,ge=_e;pe>ge?_.value.x-=ge:_.value.x-=pe}if(se.value){if(h.value){const pe=Ve,ge=He;pe>ge?_.value.y-=ge-Re:_.value.y-=pe-Re}ee.value=ze-(_.value.y+me)}else ee.value=pt||0})}})}function Me(){var s;const l=(s=u.parentMenuItemContext)==null?void 0:s.getElement();if(l){const v=Ce(l,c.container),w=xe(l,c.container);_.value.x=v,_.value.y=w}else{const[v,w]=c.getPositon();_.value.x=v,_.value.y=w}ce(()=>{var v;B(D),(v=O.value)==null||v.focus({preventScroll:!0}),c.isOpenedByKeyBoardFlag()&&ce(()=>g(!0)),k=!0}),he()}return Ae(()=>u.show,s=>{s&&Me()}),Ie(()=>{t.value=!0,u.show?Me():he()}),We(()=>{t.value=!1,Z&&(Z.getSubMenuInstance=()=>{})}),n(G),(s,l)=>{const v=oe("ContextSubMenu",!0);return t.value?(M(),T(rt,{key:0,to:`#${o(S)}`},[K(wt,Le({appear:""},o(x).menuTransitionProps||{duration:10},{onAfterLeave:l[0]||(l[0]=w=>f("closeAnimFinished"))}),{default:q(()=>{var w;return[e.show?(M(),Y("div",Le({key:0,ref_key:"submenuRoot",ref:p},s.$attrs,{class:["mx-context-menu",o(x).customClass?o(x).customClass:"",(w=o(x).theme)!=null?w:""],style:{maxWidth:e.maxWidth?o(qe)(e.maxWidth):`${o(ne).defaultMaxWidth}px`,minWidth:e.minWidth?o(qe)(e.minWidth):`${o(ne).defaultMinWidth}px`,zIndex:o(P),left:`${_.value.x}px`,top:`${_.value.y}px`},"data-type":"ContextSubMenu",onClick:z}),[K(o(Xt),{ref_key:"scrollRectRef",ref:d,scroll:"vertical",maxHeight:ee.value,containerClass:"mx-context-menu-scroll"},{default:q(()=>[X("div",{class:de(["mx-context-menu-items"]),ref_key:"menu",ref:O},[U(s.$slots,"default",{},()=>[(M(!0),Y(Ye,null,it(e.items,(i,re)=>(M(),Y(Ye,{key:re},[i.hidden!==!0&&i.divided==="up"?(M(),T(ke,{key:0})):E("",!0),i.hidden!==!0&&i.divided==="self"?(M(),T(ke,{key:1})):(M(),T(je,{key:2,clickHandler:i.onClick?V=>i.onClick(V):void 0,disabled:typeof i.disabled=="object"?i.disabled.value:i.disabled,hidden:typeof i.hidden=="object"?i.hidden.value:i.hidden,icon:i.icon,iconFontClass:i.iconFontClass,svgIcon:i.svgIcon,svgProps:i.svgProps,label:i.label,customRender:i.customRender,customClass:i.customClass,checked:typeof i.checked=="object"?i.checked.value:i.checked,shortcut:i.shortcut,clickClose:i.clickClose,clickableWhenHasChildren:i.clickableWhenHasChildren,preserveIconWidth:i.preserveIconWidth!==void 0?i.preserveIconWidth:o(x).preserveIconWidth,showRightArrow:i.children&&i.children.length>0,hasChildren:i.children&&i.children.length>0,rawMenuItem:i,onSubMenuOpen:V=>{var te;return(te=i.onSubMenuOpen)==null?void 0:te.call(i,V)},onSubMenuClose:V=>{var te;return(te=i.onSubMenuClose)==null?void 0:te.call(i,V)}},ut({_:2},[i.children&&i.children.length>0?{name:"submenu",fn:q(({context:V,show:te})=>[K(v,{show:te,parentMenuItemContext:V,items:i.children,maxWidth:i.maxWidth,minWidth:i.minWidth,maxHeight:i.maxHeight,adjustPosition:i.adjustSubMenuPosition!==void 0?i.adjustSubMenuPosition:o(x).adjustPosition,direction:i.direction!==void 0?i.direction:o(x).direction},null,8,["show","parentMenuItemContext","items","maxWidth","minWidth","maxHeight","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),i.hidden!==!0&&(i.divided==="down"||i.divided===!0)?(M(),T(ke,{key:3})):E("",!0)],64))),128))])],512)]),_:3},8,["maxHeight"])],16)):E("",!0)]}),_:3},16)],8,["to"])):E("",!0)}}}),ft=ae({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:null,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(e,{expose:n,emit:a}){const u=e,f=a,t=st(),S=I(),{options:c,show:x,container:b}=ve(u);Ie(()=>{x.value&&N()}),We(()=>{d()}),Ae(x,r=>{r?N():(Je(C),d())});const C={closeMenu:R,isClosed:y,getMenuRef:()=>S.value,getMenuDimensions:()=>{var m;var r;return(m=(r=S.value)==null?void 0:r.getMenuDimensions())!=null?m:{width:0,height:0}}};let P=!1;function N(){h(),jt(C)}function R(r){P=!0,f("close",r),c.value.menuTransitionProps||f("closeAnimFinished"),Je(C)}function y(){return P}function h(){setTimeout(()=>{document.addEventListener("click",B,!0),document.addEventListener("contextmenu",B,!0),document.addEventListener("scroll",H,!0),!u.isFullScreenContainer&&b.value&&b.value.addEventListener("scroll",H,!0),c.value.keyboardControl!==!1&&document.addEventListener("keydown",O,!0)},50)}function d(){document.removeEventListener("contextmenu",B,!0),document.removeEventListener("click",B,!0),document.removeEventListener("scroll",H,!0),!u.isFullScreenContainer&&b.value&&b.value.removeEventListener("scroll",H,!0),c.value.keyboardControl!==!1&&document.removeEventListener("keydown",O,!0)}const p=I();J("globalSetCurrentSubMenu",r=>p.value=r),J("globalGetMenuHostId",b.value.id);function O(r){var m,F,g,$,z,D,L,k,A,G,Z,Q,ee;let se=!0;switch(r.key){case"Escape":{((m=p.value)==null?void 0:m.isTopLevel())===!1?(F=p.value)==null||F.closeCurrentSubMenu():R();break}case"ArrowDown":(g=p.value)==null||g.moveCurrentItemDown();break;case"ArrowUp":($=p.value)==null||$.moveCurrentItemUp();break;case"Home":(z=p.value)==null||z.moveCurrentItemFirst();break;case"End":(D=p.value)==null||D.moveCurrentItemLast();break;case"ArrowLeft":{(L=p.value)!=null&&L.closeSelfAndActiveParent()||(A=(k=c.value).onKeyFocusMoveLeft)==null||A.call(k);break}case"ArrowRight":(G=p.value)!=null&&G.openCurrentItemSubMenu()||(Q=(Z=c.value).onKeyFocusMoveRight)==null||Q.call(Z);break;case"Enter":(ee=p.value)==null||ee.triggerCurrentItemClick(r);break;default:se=!1;break}se&&p.value&&(r.stopPropagation(),r.preventDefault())}function H(r){c.value.closeWhenScroll!==!1&&W(r.target,null)}function B(r){W(r.target,r)}function W(r,m){for(var F,g;r;){if(r.classList&&r.classList.contains("mx-context-menu"))return;r=r.parentNode}m?c.value.clickCloseOnOutside!==!1?(d(),R()):(g=(F=c.value).onClickOnOutside)==null||g.call(F,m):(d(),R())}return J("globalOptions",c),J("globalCloseMenu",R),J("globalIsFullScreenContainer",u.isFullScreenContainer),J("globalHasSlot",r=>t[r]!==void 0),J("globalRenderSlot",(r,m)=>U(t,r,ue({},m),()=>[fe("span","Render slot failed")],!1)),J("menuContext",{zIndex:c.value.zIndex||ne.defaultZindex,container:b.value,adjustPadding:{x:0,y:0},getZoom:()=>c.value.zoom||ne.defaultZoom,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[c.value.x,c.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),n(C),(r,m)=>(M(),T(Fe,{ref_key:"submenuInstance",ref:S,show:o(x),items:o(c).items,adjustPosition:o(c).adjustPosition,maxWidth:o(c).maxWidth||o(ne).defaultMaxWidth,minWidth:o(c).minWidth||o(ne).defaultMinWidth,maxHeight:o(c).maxHeight,direction:o(c).direction||o(ne).defaultDirection,onCloseAnimFinished:m[0]||(m[0]=F=>f("closeAnimFinished"))},{default:q(()=>[U(r.$slots,"default")]),_:3},8,["show","items","adjustPosition","maxWidth","minWidth","maxHeight","direction"]))}}),pl=ae({__name:"ContextMenu",props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},emits:["update:show","close"],setup(e,{expose:n,emit:a}){const u=a,f=e,{options:t,show:S}=ve(f),{isNew:c,container:x,eleId:b}=dt(t.value),C=I(null),P=st();function N(R){var y,h;u("update:show",!1),u("close"),(h=(y=t.value).onClose)==null||h.call(y,R)}return n({closeMenu:()=>u("update:show",!1),isClosed:()=>!S.value,getMenuRef:()=>{var R;return(R=C.value)==null?void 0:R.getMenuRef()},getMenuDimensions:()=>{var y;var R;return(y=(R=C.value)==null?void 0:R.getMenuDimensions())!=null?y:{width:0,height:0}}}),(R,y)=>(M(),T(rt,{to:`#${o(b)}`},[K(ft,{ref_key:"menuRef",ref:C,options:o(t),show:o(S),container:o(x),isFullScreenContainer:!o(c),onClose:N},ut({_:2},[it(o(P),(h,d)=>({name:d,fn:q(p=>[U(R.$slots,d,Mt(St(p)))])}))]),1032,["options","show","container","isFullScreenContainer"])],8,["to"]))}}),gl=ae({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxHeight:{type:[String,Number],default:0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(e,n){const a=j("globalOptions"),{adjustSubMenuPosition:u,maxWidth:f,minWidth:t,maxHeight:S}=ve(e),c=typeof u.value<"u"?u.value:a.value.adjustPosition,x=I(),b=I();return n.expose({getSubMenuRef:()=>x.value,getMenuItemRef:()=>b.value}),()=>fe(je,we(ue({},e),{ref:b,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,maxHeight:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof n.slots.default!==void 0}),n.slots.default?ue({submenu:C=>fe(Fe,{ref:x,show:C.show,maxWidth:f.value,minWidth:t.value,maxHeight:S.value,adjustPosition:c,parentMenuItemContext:C.context},{default:n.slots.default})},Nt(n.slots,"default")):n.slots)}});function bl(e,n,a,u){const f=I(!0),t=fe(ft,{options:e,show:f,container:n,isFullScreenContainer:!a,onCloseAnimFinished:()=>{Ze(null,n)},onClose:S=>{var c;(c=e.onClose)==null||c.call(e,S),f.value=!1}},u);return Ze(t,n),t.component}function at(e,n){const a=dt(e);return bl(e,a.container,a.isNew,n).exposed}const yl={install(e){e.config.globalProperties.$contextmenu=at,e.component("ContextMenu",pl),e.component("ContextMenuItem",je),e.component("ContextMenuGroup",gl),e.component("ContextMenuSperator",ke),e.component("ContextMenuSeparator",ke),e.component("ContextSubMenu",Fe)},showContextMenu(e,n){return at(e,n)},isAnyContextMenuOpen(){return Tt()},closeContextMenu:ct,transformMenuPosition:Ft},xl={class:"h-full bg-bg_color overflow-hidden relative",style:{minHeight:"calc(100vh - 141px)"}},Cl={class:"flex items-center h-[34px]"},kl=ae({__name:"tree",emits:["tree-select"],setup(e,{emit:n}){const a=n,u=I(),f=I(""),t=I({}),S={children:"children",label:"name"},{isDark:c}=It(),{treeLoading:x,treeData:b,openDictDialog:C,getDictTreeData:P}=Ot(),N=(h,d)=>h?`${d.name}（${d.code}）`.includes(h):!0;function R(h){var p,O;const d=h.$treeNodeId;t.value[d]=(p=t.value[d])!=null&&p.highlight?Object.assign({id:d},t.value[d],{highlight:!1}):Object.assign({id:d},t.value[d],{highlight:!0}),Object.values(t.value).forEach(H=>{H.id!==d&&(H.highlight=!1)}),a("tree-select",(O=t.value[d])!=null&&O.highlight?Object.assign(we(ue({},h),{selected:!0})):Object.assign(we(ue({},h),{selected:!1})))}function y(h,{name:d,data:p}){h.preventDefault(),yl.showContextMenu({x:h.x,y:h.y,theme:c.value?"dark":"default",items:[{label:"修改",icon:fe(Pe($t)),onClick:()=>{C("修改",p)}},{label:"删除",icon:fe(Pe(Lt)),onClick:()=>{_t.confirm(`确定要删除 <strong style='color:var(--el-color-primary)'>${d}</strong> 字典吗?`,"系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,draggable:!0}).then(()=>{P(),Ht("已成功删除",{type:"success"})})}}]})}return Ae(f,h=>{u.value.filter(h)}),(h,d)=>{const p=oe("IconifyIconOffline"),O=oe("el-icon"),H=oe("el-input"),B=oe("el-divider"),W=oe("el-tree"),r=oe("el-scrollbar"),m=oe("el-button"),F=Wt("loading");return Ge((M(),Y("div",xl,[X("div",Cl,[K(H,{modelValue:f.value,"onUpdate:modelValue":d[0]||(d[0]=g=>f.value=g),class:"mx-2",size:"small",placeholder:"请输入字典名称",clearable:""},{suffix:q(()=>[K(O,{class:"el-input__icon"},{default:q(()=>[Ge(K(p,{icon:"ri/search-line"},null,512),[[Rt,f.value.length===0]])]),_:1})]),_:1},8,["modelValue"])]),K(B),K(r,{height:"calc(90vh - 150px)"},{default:q(()=>[K(W,{ref_key:"treeRef",ref:u,data:o(b),"node-key":"id",size:"small",props:S,"default-expand-all":"","expand-on-click-node":!1,"filter-node-method":N,onNodeClick:R},{default:q(({node:g,data:$})=>{var z,D,L;return[K(o(Bt),{class:de(["w-full!","p-1!","mt-2!","mr-2!","rounded","select-none","hover:text-primary",f.value.trim().length>0&&`${g.label}（${$.code}）`.includes(f.value)&&"text-red-500!",(z=t.value[g.id])!=null&&z.highlight?"dark:text-primary!":""]),style:be({color:(D=t.value[g.id])!=null&&D.highlight?"var(--el-color-primary)":"",background:(L=t.value[g.id])!=null&&L.highlight?"var(--el-color-primary-light-7)":"transparent"}),onContextmenu:k=>y(k,{name:g.label,data:$})},{default:q(()=>[Qe($e(`${g.label}（${$.code}）`),1)]),_:2},1032,["class","style","onContextmenu"])]}),_:1},8,["data"])]),_:1}),K(m,{class:"w-[90%] absolute bottom-[22px] left-[50%] -translate-x-[50%]",type:"primary",icon:o(Pe)(o(At)),onClick:d[1]||(d[1]=g=>o(C)())},{default:q(()=>[...d[2]||(d[2]=[Qe(" 新增字典 ",-1)])]),_:1},8,["icon"])])),[[F,o(x)]])}}}),Tl=Pt(kl,[["__scopeId","data-v-4b98bf26"]]);export{Tl as default};
