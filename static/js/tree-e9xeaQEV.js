var mt=Object.defineProperty,ht=Object.defineProperties;var pt=Object.getOwnPropertyDescriptors;var Ae=Object.getOwnPropertySymbols;var gt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable;var De=(e,o,a)=>o in e?mt(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,se=(e,o)=>{for(var a in o||(o={}))gt.call(o,a)&&De(e,a,o[a]);if(Ae)for(var a of Ae(o))bt.call(o,a)&&De(e,a,o[a]);return e},ke=(e,o)=>ht(e,pt(o));import{d as ne,b5 as ce,a as R,a_ as et,e as $,f as C,g as X,aJ as tt,l as lt,w as J,O as N,aK as nt,bo as yt,u as n,T as ot,b8 as K,m as Ie,x as be,y as We,i as D,k as q,v as ue,h as Z,a4 as Me,t as Be,el as at,L as ie,b as le,F as Fe,s as Se,gs as Ee,n as st,bc as te,r as Ne,af as xt,z as Ct,A as Ke,$ as kt,j as Ve,fR as Mt,J as St,_ as wt}from"./index-BPnJ62Ul.js";import{useDict as It}from"./hook-DjeCgeSt.js";import{R as Wt}from"./index-gg6S5FaG.js";import{u as _e}from"./hooks-CuLpiwJ9.js";import{D as Pt}from"./delete-DPR-zNql.js";import{E as Rt}from"./edit-pen-Cj-r8Pzn.js";import{A as _t}from"./add-circle-line-ug-baese.js";import"./dict.vue_vue_type_script_setup_true_lang-C4iKTBGe.js";import"./index-wm09_hEP.js";import"./rule-BYJ-BW9E.js";import"./index-CSLpRXGn.js";import"./hooks-DTNR1NUP.js";import"./system-Cz08glEg.js";let ae=null;function Ot(){return ae!==null}function Bt(e){ae&&ut(),ae=e}function Ye(e){e===ae&&(ae=null)}function ut(){ae&&(ae.closeMenu(),ae=null)}const G={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultZoom:1,defaultAdjustPadding:{x:0,y:10}};function he(e,o){let a=e.offsetTop;return e.offsetParent!=null&&e.offsetParent!=o&&(a-=e.offsetParent.scrollTop,a+=he(e.offsetParent,o)),a}function pe(e,o){let a=e.offsetLeft;return e.offsetParent!=null&&e.offsetParent!=o&&(a-=e.offsetParent.scrollLeft,a+=pe(e.offsetParent,o)),a}function Ht(e,o,a,r){return{x:pe(e,r)+o,y:he(e,r)+a}}const Oe="mx-menu-default-container",jt="mx-menu-container-";let Tt=0;function rt(e){const{getContainer:o,zIndex:a}=e;if(o){const f=typeof o=="function"?o():o;if(f){let t=f.getAttribute("id");return t||(t=jt+Tt++,f.setAttribute("id",t)),{eleId:t,container:f,isNew:!1}}}let r=document.getElementById(Oe);return r||(r=document.createElement("div"),r.setAttribute("id",Oe),r.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(r)),r.style.zIndex=(a==null?void 0:a.toString())||G.defaultZindex.toString(),{eleId:Oe,container:r,isNew:!0}}function Ue(e){return typeof e=="number"?`${e}px`:e}const ee=ne({props:{vnode:{type:null},data:{type:null,default:null}},setup(e){const{vnode:o,data:a}=ce(e);return()=>typeof o.value=="function"?o.value(a.value):o.value}});function Lt(e,o){const a=se({},e);return delete a[o],a}var $t=Object.defineProperty,zt=(e,o,a)=>o in e?$t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,Ze=(e,o,a)=>zt(e,typeof o!="symbol"?o+"":o,a);class Xe{constructor(o,a){Ze(this,"x",0),Ze(this,"y",0),this.x=o||0,this.y=a||0}set(o,a){this.x=o,this.y=a}substract(o){this.x-=o.x,this.y-=o.y}}function Ge(e){const{onDown:o,onMove:a,onUp:r}=e,f=new Xe,t=new Xe;let m;function u(y){y.stopPropagation(),t.set(y.x,y.y),t.substract(f),a(f,t,y,m)}function P(y){r(y,m),f.set(0,0),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",P)}return(y,S)=>o(y,S)?(m=S,f.set(y.x,y.y),document.addEventListener("mousemove",u),document.addEventListener("mouseup",P),y.stopPropagation(),!0):!1}function At(e,o){let a=0;return{start(){a>0&&clearInterval(a),a=setInterval(()=>{a=0,o()},e)},stop(){a>0&&(clearInterval(a),a=0)}}}const me=[],Je=At(100,()=>{for(const e of me)e()});function Dt(e,o,a,r){let f=0,t=0;function m(){e.value&&(o&&f!==e.value.offsetWidth&&o(e.value.offsetWidth),a&&t!==e.value.offsetHeight&&a(e.value.offsetHeight),f=e.value.offsetWidth,t=e.value.offsetHeight)}return{startResizeChecker(){Je.start(),me.push(m)},stopResizeChecker(){const u=me.indexOf(m);u>=0&&me.splice(u,1),me.length===0&&Je.stop()}}}const qe=140,Ft=70,Et=ne({__name:"ScrollRect",props:{scroll:{type:String,default:"both"},scrollBarAlwaysShow:{type:Boolean,default:!1},scrollBarBackgroundClickable:{type:Boolean,default:!1},containerClass:{type:String,default:""}},emits:["scroll"],setup(e,{expose:o,emit:a}){const r=e,f=a,t=R(),m=R(),u=R(),P=R(),y=R(),S=R(),T=R(!1),w=Ne({show:!1,size:0,sizeRaw:0,pos:0}),v=Ne({show:!1,size:0,sizeRaw:0,pos:0});let H=0,k=0,i=0,d=0,g=null;const _={attributes:!0,childList:!0};function z(){if(t.value){if(w.show){const l=t.value.offsetWidth/t.value.scrollWidth;w.sizeRaw=l*t.value.offsetWidth,w.size=l*100,w.pos=t.value.scrollLeft/(t.value.scrollWidth-t.value.offsetWidth)*(100-w.size),l>=1&&(w.show=!1)}if(v.show){const l=t.value.offsetHeight/t.value.scrollHeight;v.sizeRaw=l*t.value.offsetHeight,v.size=l*100,v.pos=t.value.scrollTop/(t.value.scrollHeight-t.value.offsetHeight)*(100-v.size),l>=1&&(v.show=!1)}f("scroll",t.value.scrollLeft,t.value.scrollTop)}}function j(l=!1){if(!t.value)return;let B=r.scroll==="horizontal"||r.scroll==="both",I=r.scroll==="vertical"||r.scroll==="both";const U=B&&(H!==t.value.scrollWidth||i!==t.value.offsetWidth),de=I&&(k!==t.value.scrollHeight||d!==t.value.offsetHeight);if(!l&&!U&&!de)return;const re=window.getComputedStyle(t.value);(re.overflow==="hidden"||re.overflowX==="hidden")&&(B=!1),(re.overflow==="hidden"||re.overflowY==="hidden")&&(I=!1),w.show=B,v.show=I,z(),i=t.value.offsetWidth,d=t.value.offsetHeight,H=t.value.scrollWidth,k=t.value.scrollHeight}function c(l){var B;r.scroll=="horizontal"&&(l.deltaMode==0&&((B=t.value)==null||B.scrollTo({left:t.value.scrollLeft+(l.deltaY>0?qe:-140),behavior:"smooth"})),l.preventDefault(),l.stopPropagation())}function x(l){var B;l.deltaMode==0&&((B=t.value)==null||B.scrollTo({left:t.value.scrollLeft+(l.deltaY>0?qe:-140),behavior:"smooth"}),l.preventDefault(),l.stopPropagation())}function W(l){var B;l.deltaMode==0&&((B=t.value)==null||B.scrollTo({top:t.value.scrollTop+(l.deltaY>0?Ft:-70),behavior:"smooth"}),l.preventDefault(),l.stopPropagation())}let O=0,F=0,V=0,A=0;const h=Ge({onDown(l){return!u.value||!y.value?!1:(O=l.offsetX,F=l.x-l.offsetX-y.value.offsetLeft,l.preventDefault(),T.value=!0,!0)},onMove(l,B,I){t.value&&u.value&&(E(I.x-O-F),I.preventDefault(),I.stopPropagation())},onUp(){T.value=!1}}),L=Ge({onDown(l){return!P.value||!S.value?!1:(V=l.offsetY,A=l.y-l.offsetY-S.value.offsetTop,l.preventDefault(),T.value=!0,!0)},onMove(l,B,I){t.value&&P.value&&(oe(I.y-V-A),I.preventDefault(),I.stopPropagation())},onUp(){T.value=!1}});function Y(l){t.value&&(t.value.scrollLeft=l/100*(t.value.scrollWidth-t.value.offsetWidth))}function M(l){t.value&&(t.value.scrollLeft=l/100*(t.value.scrollHeight-t.value.offsetHeight))}function E(l){t.value&&(t.value.scrollLeft=l/(t.value.offsetWidth-w.sizeRaw)*(t.value.scrollWidth-t.value.offsetWidth))}function oe(l){t.value&&(t.value.scrollTop=l/(t.value.offsetHeight-v.sizeRaw)*(t.value.scrollHeight-t.value.offsetHeight))}function s(l){r.scrollBarBackgroundClickable&&E(l.offsetX-w.sizeRaw/2)}function p(l){r.scrollBarBackgroundClickable&&oe(l.offsetY-v.sizeRaw/2)}const{startResizeChecker:b,stopResizeChecker:Q}=Dt(t,()=>j(),()=>j());return Ie(()=>{be(()=>{setTimeout(()=>j(!0),200),j(!0),b(),g=new MutationObserver(()=>j()),g.observe(t.value,_)})}),We(()=>{Q(),g&&(g.disconnect(),g=null)}),o({refreshScrollState(){j(!0)},getScrollContainer(){return t.value},scrollTo(l,B){var I;(I=t.value)==null||I.scrollTo(l,B)},scrollToTop(){var l;(l=t.value)==null||l.scrollTo(0,0)},scrollToBottom(){var l;(l=t.value)==null||l.scrollTo(t.value.scrollWidth,t.value.scrollHeight)}}),(l,B)=>(C(),q("div",{ref_key:"scrollrect",ref:m,class:ue(["vue-scroll-rect",e.scrollBarAlwaysShow?"always-show-scrollbar":"",e.scrollBarBackgroundClickable?"background-clickable":"",T.value?"dragging":""]),onWheel:c},[Z("div",{ref_key:"container",ref:t,class:ue(["scroll-content",e.scroll,e.containerClass]),onScroll:z},[N(l.$slots,"default")],34),w.show?N(l.$slots,"scrollBarX",{key:0,scrollBarValue:w,onScroll:Y},()=>[Z("div",{ref_key:"scrollBarRefX",ref:u,class:"scrollbar horizontal",onClick:s,onWheel:x},[Z("div",{class:"thumb",ref_key:"scrollBarThumbRefX",ref:y,style:Se({left:`${w.pos}%`,width:`${w.size}%`}),onMousedown:B[0]||(B[0]=(...I)=>n(h)&&n(h)(...I)),onWheel:x},null,36)],544)]):D("",!0),v.show?N(l.$slots,"scrollBarY",{key:1,scrollBarValue:v,onScroll:M},()=>[v.show?(C(),q("div",{key:0,ref_key:"scrollBarRefY",ref:P,class:"scrollbar vertical",onClick:p,onWheel:W},[Z("div",{class:"thumb",ref_key:"scrollBarThumbRefY",ref:S,style:Se({top:`${v.pos}%`,height:`${v.size}%`}),onMousedown:B[1]||(B[1]=(...I)=>n(L)&&n(L)(...I)),onWheel:W},null,36)],544)):D("",!0)]):D("",!0)],34))}}),He=(e,o)=>{const a=e.__vccOpts||e;for(const[r,f]of o)a[r]=f;return a},Nt={},Kt={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},Vt=Z("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),Yt=[Vt];function Ut(e,o){return C(),q("svg",Kt,Yt)}const Zt=He(Nt,[["render",Ut]]),Xt={},Gt={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},Jt=Z("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),qt=[Jt];function Qt(e,o){return C(),q("svg",Gt,qt)}const el=He(Xt,[["render",Qt]]),tl={class:"mx-item-row"},ll=["xlink:href"],nl={key:1,class:"label"},ol={class:"mx-item-row"},al={class:"mx-shortcut"},je=ne({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(e,{expose:o,emit:a}){const r=e,f=a,{clickHandler:t,clickClose:m,clickableWhenHasChildren:u,disabled:P,hidden:y,label:S,icon:T,iconFontClass:w,showRightArrow:v,shortcut:H,hasChildren:k}=ce(r),i=R(!1),d=R(!1),g=R(),_=K("globalOptions"),z=K("globalHasSlot"),j=K("globalRenderSlot"),c=K("globalCloseMenu"),x=K("menuContext"),W={getSubMenuInstance:()=>{},showSubMenu:()=>i.value?(x.markActiveMenuItem(W,!0),!0):k.value?(F(),!0):!1,hideSubMenu:()=>{x.closeOtherSubMenu()},isDisabledOrHidden:()=>P.value||y.value,getElement:()=>g.value,focus:()=>d.value=!0,blur:()=>d.value=!1,click:O};te("menuItemInstance",W),Ie(()=>{x.isMenuItemDataCollectedFlag()?be(()=>{let h=0;const L=x.getElement();if(L){let Y=0;for(let M=0;M<L.children.length;M++){const E=L.children[M];if(E.getAttribute("data-type")==="ContextMenuItem"){if(E===g.value){h=Y;break}Y++}}}x.addChildMenuItem(W,h)}):x.addChildMenuItem(W)}),We(()=>{x.removeChildMenuItem(W)});function O(h){if(!P.value){if(h){const L=h.target;if(L.classList.contains("mx-context-no-clickable")||_.value.ignoreClickClassName&&L.classList.contains(_.value.ignoreClickClassName))return;if(_.value.clickCloseClassName&&L.classList.contains(_.value.clickCloseClassName)){h.stopPropagation(),c(r.rawMenuItem);return}}k.value?u.value?(typeof t.value=="function"&&t.value(h),f("click",h)):i.value||F():(typeof t.value=="function"&&t.value(h),f("click",h),m.value&&c(r.rawMenuItem))}}function F(h){d.value=!1,x.checkCloseOtherSubMenuTimeOut()||x.closeOtherSubMenu(),P.value||(x.markActiveMenuItem(W),k.value&&(h||x.markThisOpenedByKeyBoard(),x.addOpenedSubMenu(V),i.value=!0,be(()=>f("subMenuOpen",W))))}function V(){d.value=!1,i.value=!1,f("subMenuClose",W)}function A(){return{disabled:P.value,label:S.value,icon:T.value,iconFontClass:w.value,showRightArrow:v.value,clickClose:m.value,clickableWhenHasChildren:u.value,shortcut:H.value,theme:_.value.theme,isOpen:i,hasChildren:k,onClick:O,onMouseEnter:F,closeMenu:c}}return o(W),(h,L)=>n(y)?D("",!0):(C(),q("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:g,"data-type":"ContextMenuItem"},[n(z)("itemRender")?(C(),$(n(ee),{key:0,vnode:()=>n(j)("itemRender",A())},null,8,["vnode"])):e.customRender?(C(),$(n(ee),{key:1,vnode:e.customRender,data:A()},null,8,["vnode","data"])):(C(),q("div",{key:2,class:ue(["mx-context-menu-item",n(P)?"disabled":"",d.value?"keyboard-focus":"",e.customClass?" "+e.customClass:"",i.value?"open":""]),onClick:O,onMouseenter:F},[N(h.$slots,"default",{},()=>[Z("div",tl,[Z("div",{class:ue(["mx-icon-placeholder",e.preserveIconWidth?"preserve-width":""])},[N(h.$slots,"icon",{},()=>[n(z)("itemIconRender")?(C(),$(n(ee),{key:0,vnode:()=>n(j)("itemIconRender",A())},null,8,["vnode"])):typeof e.svgIcon=="string"&&e.svgIcon?(C(),q("svg",Me({key:1,class:"icon svg"},e.svgProps),[Z("use",{"xlink:href":e.svgIcon},null,8,ll)],16)):typeof n(T)!="string"?(C(),$(n(ee),{key:2,vnode:n(T),data:n(T)},null,8,["vnode","data"])):typeof n(T)=="string"&&n(T)!==""?(C(),q("i",{key:3,class:ue(n(T)+" icon "+n(w)+" "+n(_).iconFontClass)},null,2)):D("",!0)]),e.checked?N(h.$slots,"check",{key:0},()=>[n(z)("itemCheckRender")?(C(),$(n(ee),{key:0,vnode:()=>n(j)("itemCheckRender",A())},null,8,["vnode"])):D("",!0),X(Zt)]):D("",!0)],2),N(h.$slots,"label",{},()=>[n(z)("itemLabelRender")?(C(),$(n(ee),{key:0,vnode:()=>n(j)("itemLabelRender",A())},null,8,["vnode"])):typeof n(S)=="string"?(C(),q("span",nl,Be(n(S)),1)):(C(),$(n(ee),{key:2,vnode:n(S),data:n(S)},null,8,["vnode","data"]))])]),Z("div",ol,[n(H)||h.$slots.shortcut?N(h.$slots,"shortcut",{key:0},()=>[n(z)("itemShortcutRender")?(C(),$(n(ee),{key:0,vnode:()=>n(j)("itemShortcutRender",A())},null,8,["vnode"])):D("",!0),Z("span",al,Be(n(H)),1)]):D("",!0),n(v)?N(h.$slots,"rightArrow",{key:1},()=>[n(z)("itemRightArrowRender")?(C(),$(n(ee),{key:0,vnode:()=>n(j)("itemRightArrowRender",A())},null,8,["vnode"])):D("",!0),X(el)]):D("",!0)])])],34)),n(_).menuTransitionProps?(C(),$(at,nt(Me({key:3},n(_).menuTransitionProps)),{default:J(()=>[i.value?N(h.$slots,"submenu",{key:0,context:W}):D("",!0)]),_:3},16)):i.value?N(h.$slots,"submenu",{key:4,context:W}):D("",!0)],512))}}),sl=ne({name:"ContextMenuSperator",components:{VNodeRender:ee},setup(){const e=K("globalHasSlot"),o=K("globalRenderSlot");return{globalHasSlot:e,globalRenderSlot:o}}}),ul={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function rl(e,o,a,r,f,t){const m=le("VNodeRender");return e.globalHasSlot("separatorRender")?(C(),$(m,{key:0,vnode:()=>e.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(C(),q("div",ul))}const ge=He(sl,[["render",rl]]),we=ne({__name:"ContextSubMenu",props:{items:{type:Object,default:null},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"},parentMenuItemContext:{type:Object,default:null}},setup(e,{expose:o}){const a=e,r=R(!1),f=K("globalGetMenuHostId",""),t=K("menuContext"),m=K("globalOptions");K("globalHasSlot"),K("globalRenderSlot");const{zIndex:u,getParentWidth:P,getParentHeight:y,getZoom:S}=t,{adjustPosition:T}=ce(a),w=R(),v=R(),H=R(),k=[],i=K("globalSetCurrentSubMenu"),d=[];let g=null,_=0;function z(){g&&g.blur()}function j(s,p){if(s){for(let b=p!==void 0?p:0;b<d.length;b++)if(!d[b].isDisabledOrHidden()){c(b);break}}else for(let b=p!==void 0?p:d.length-1;b>=0;b--)if(!d[b].isDisabledOrHidden()){c(b);break}}function c(s){var p;if(g&&z(),s!==void 0&&(g=d[Math.max(0,Math.min(s,d.length-1))]),!!g&&(g.focus(),Y.value)){const b=g.getElement();b&&((p=w.value)==null||p.scrollTo(0,Math.min(Math.max(-L.value,-b.offsetTop-b.offsetHeight+E.value),0)))}}function x(){i(W)}const W={isTopLevel:()=>t.getParentContext()===null,closeSelfAndActiveParent:()=>{const s=V.getParentContext();if(s){s.closeOtherSubMenu();const p=s.getSubMenuInstanceContext();if(p)return p.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var s;return(s=V.getParentContext())==null?void 0:s.closeOtherSubMenu()},moveCurrentItemFirst:()=>j(!0),moveCurrentItemLast:()=>j(!1),moveCurrentItemDown:()=>j(!0,g?d.indexOf(g)+1:0),moveCurrentItemUp:()=>j(!1,g?d.indexOf(g)-1:0),focusCurrentItem:()=>c(),openCurrentItemSubMenu:()=>g?g==null?void 0:g.showSubMenu():!1,triggerCurrentItemClick:s=>g==null?void 0:g.click(s)};let O=!1,F=!1;const V={zIndex:u+1,container:t.container,adjustPadding:m.value.adjustPadding||G.defaultAdjustPadding,getParentWidth:()=>{var s;return((s=H.value)==null?void 0:s.offsetWidth)||0},getParentHeight:()=>{var s;return((s=H.value)==null?void 0:s.offsetHeight)||0},getPositon:()=>[M.value.x,M.value.y],getZoom:()=>m.value.zoom||G.defaultZoom,addOpenedSubMenu(s){k.push(s)},closeOtherSubMenu(){k.forEach(s=>s()),k.splice(0,k.length),i(W)},checkCloseOtherSubMenuTimeOut(){return _?(clearTimeout(_),_=0,!0):!1},closeOtherSubMenuWithTimeOut(){_=setTimeout(()=>{_=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(s,p)=>{p===void 0?d.push(s):d.splice(p,0,s)},removeChildMenuItem:s=>{d.splice(d.indexOf(s),1),s.getSubMenuInstance=()=>{}},markActiveMenuItem:(s,p=!1)=>{z(),g=s,p&&c()},markThisOpenedByKeyBoard:()=>{O=!0},isOpenedByKeyBoardFlag:()=>O?(O=!1,!0):!1,isMenuItemDataCollectedFlag:()=>F,getElement:()=>H.value||null,getParentContext:()=>t,getSubMenuInstanceContext:()=>W};te("menuContext",V);const A={getChildItem:s=>d[s],getMenuDimensions:()=>v.value?{width:v.value.offsetWidth,height:v.value.offsetHeight}:{width:0,height:0},getSubmenuRoot:()=>v.value,getMenu:()=>H.value,getScrollValue:()=>{var s,p;return((p=(s=w.value)==null?void 0:s.getScrollContainer())==null?void 0:p.scrollTop)||0},setScrollValue:s=>{var p;return(p=w.value)==null?void 0:p.scrollTo(0,s)},getScrollHeight:()=>L.value,adjustPosition:()=>{oe()},getMaxHeight:()=>E.value,getPosition:()=>M.value,setPosition:(s,p)=>{M.value.x=s,M.value.y=p}},h=K("menuItemInstance",void 0);h&&(h.getSubMenuInstance=()=>A);const L=R(0),Y=R(!1),M=R({x:0,y:0}),E=R(0);function oe(){be(()=>{var Q,l,B,I;var s,p;const b=H.value;if(b&&w.value){const{container:U}=t,de=(Q=P==null?void 0:P())!=null?Q:0,re=(l=y==null?void 0:y())!=null?l:0,ye=typeof t.adjustPadding=="number"?t.adjustPadding:(B=(s=t.adjustPadding)==null?void 0:s.x)!=null?B:0,xe=typeof t.adjustPadding=="number"?t.adjustPadding:(I=(p=t.adjustPadding)==null?void 0:p.y)!=null?I:0,Ce=re>0?xe:0,ct=document.documentElement.scrollHeight/S(),dt=document.documentElement.scrollWidth/S(),ft=Math.min(dt,U.offsetWidth),Te=Math.min(ct,U.offsetHeight);let Pe=pe(b,U),Re=he(b,U);a.direction.includes("l")?M.value.x-=b.offsetWidth+ye:a.direction.includes("r")?M.value.x+=de+ye:(M.value.x+=de/2,M.value.x-=(b.offsetWidth+ye)/2),a.direction.includes("t")?M.value.y-=(b.offsetHeight+xe*2)/S():a.direction.includes("b")?M.value.y-=xe/S():M.value.y-=(b.offsetHeight+xe)/2/S(),T.value&&be(()=>{var Le,$e;Pe=pe(b,U),Re=he(b,U),L.value=(($e=(Le=w.value)==null?void 0:Le.getScrollContainer())==null?void 0:$e.scrollHeight)||0;const vt=Pe+b.offsetWidth-ft,ze=Re+L.value+Ce*2-Te;if(Y.value=ze>0,vt>0){const fe=de+b.offsetWidth-ye,ve=Pe;fe>ve?M.value.x-=ve:M.value.x-=fe}if(Y.value){const fe=ze,ve=Re;fe>ve?M.value.y-=ve-Ce:M.value.y-=fe-Ce,E.value=Te-Ce*2}else E.value=0})}b==null||b.focus({preventScroll:!0}),t.isOpenedByKeyBoardFlag()&&j(!0),F=!0})}return Ie(()=>{var s;r.value=!0;const p=(s=a.parentMenuItemContext)==null?void 0:s.getElement();if(p){const b=pe(p,t.container),Q=he(p,t.container);M.value.x=b,M.value.y=Q}else{const[b,Q]=t.getPositon();M.value.x=b,M.value.y=Q}i(W),oe()}),We(()=>{r.value=!1,h&&(h.getSubMenuInstance=()=>{})}),o(A),(s,p)=>{var Q;const b=le("ContextSubMenu",!0);return r.value?(C(),$(ot,{key:0,to:`#${n(f)}`},[Z("div",Me({ref_key:"submenuRoot",ref:v},s.$attrs,{class:["mx-context-menu",n(m).customClass?n(m).customClass:"",(Q=n(m).theme)!=null?Q:""],style:{maxWidth:e.maxWidth?n(Ue)(e.maxWidth):`${n(G).defaultMaxWidth}px`,minWidth:e.minWidth?n(Ue)(e.minWidth):`${n(G).defaultMinWidth}px`,maxHeight:Y.value&&E.value>0?`${E.value}px`:void 0,zIndex:n(u),left:`${M.value.x}px`,top:`${M.value.y}px`},"data-type":"ContextSubMenu",onClick:x}),[X(n(Et),{ref_key:"scrollRectRef",ref:w,scroll:Y.value?"vertical":"none",style:Se({width:"auto",height:`${Y.value?E.value:L.value}px`})},{default:J(()=>[Z("div",{class:ue(["mx-context-menu-items"]),ref_key:"menu",ref:H},[N(s.$slots,"default",{},()=>[(C(!0),q(Fe,null,lt(e.items,(l,B)=>(C(),q(Fe,{key:B},[l.hidden!==!0&&l.divided==="up"?(C(),$(ge,{key:0})):D("",!0),l.hidden!==!0&&l.divided==="self"?(C(),$(ge,{key:1})):(C(),$(je,{key:2,clickHandler:l.onClick?I=>l.onClick(I):void 0,disabled:typeof l.disabled=="object"?l.disabled.value:l.disabled,hidden:typeof l.hidden=="object"?l.hidden.value:l.hidden,icon:l.icon,iconFontClass:l.iconFontClass,svgIcon:l.svgIcon,svgProps:l.svgProps,label:l.label,customRender:l.customRender,customClass:l.customClass,checked:typeof l.checked=="object"?l.checked.value:l.checked,shortcut:l.shortcut,clickClose:l.clickClose,clickableWhenHasChildren:l.clickableWhenHasChildren,preserveIconWidth:l.preserveIconWidth!==void 0?l.preserveIconWidth:n(m).preserveIconWidth,showRightArrow:l.children&&l.children.length>0,hasChildren:l.children&&l.children.length>0,rawMenuItem:l,onSubMenuOpen:I=>{var U;return(U=l.onSubMenuOpen)==null?void 0:U.call(l,I)},onSubMenuClose:I=>{var U;return(U=l.onSubMenuClose)==null?void 0:U.call(l,I)}},tt({_:2},[l.children&&l.children.length>0?{name:"submenu",fn:J(({context:I})=>[X(b,{parentMenuItemContext:I,items:l.children,maxWidth:l.maxWidth,minWidth:l.minWidth,adjustPosition:l.adjustSubMenuPosition!==void 0?l.adjustSubMenuPosition:n(m).adjustPosition,direction:l.direction!==void 0?l.direction:n(m).direction},null,8,["parentMenuItemContext","items","maxWidth","minWidth","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),l.hidden!==!0&&(l.divided==="down"||l.divided===!0)?(C(),$(ge,{key:3})):D("",!0)],64))),128))])],512)]),_:3},8,["scroll","style"])],16)],8,["to"])):D("",!0)}}}),it=ne({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:Boolean,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(e,{expose:o,emit:a}){const r=e,f=a,t=et(),m=R(),{options:u,show:P,container:y}=ce(r);Ie(()=>{P.value&&w()}),We(()=>{i()}),st(P,c=>{c?w():(Ye(S),i())});const S={closeMenu:v,isClosed:H,getMenuRef:()=>m.value,getMenuDimensions:()=>{var x;var c;return(x=(c=m.value)==null?void 0:c.getMenuDimensions())!=null?x:{width:0,height:0}}};let T=!1;function w(){k(),Bt(S)}function v(c){T=!0,f("close",c),u.value.menuTransitionProps||f("closeAnimFinished"),Ye(S)}function H(){return T}function k(){setTimeout(()=>{document.addEventListener("click",z,!0),document.addEventListener("contextmenu",z,!0),document.addEventListener("scroll",_,!0),!r.isFullScreenContainer&&y.value&&y.value.addEventListener("scroll",_,!0),u.value.keyboardControl!==!1&&document.addEventListener("keydown",g,!0)},50)}function i(){document.removeEventListener("contextmenu",z,!0),document.removeEventListener("click",z,!0),document.removeEventListener("scroll",_,!0),!r.isFullScreenContainer&&y.value&&y.value.removeEventListener("scroll",_,!0),u.value.keyboardControl!==!1&&document.removeEventListener("keydown",g,!0)}const d=R();te("globalSetCurrentSubMenu",c=>d.value=c),te("globalGetMenuHostId",y.value.id);function g(c){var x,W,O,F,V,A,h,L,Y,M,E,oe,s;let p=!0;switch(c.key){case"Escape":{((x=d.value)==null?void 0:x.isTopLevel())===!1?(W=d.value)==null||W.closeCurrentSubMenu():v();break}case"ArrowDown":(O=d.value)==null||O.moveCurrentItemDown();break;case"ArrowUp":(F=d.value)==null||F.moveCurrentItemUp();break;case"Home":(V=d.value)==null||V.moveCurrentItemFirst();break;case"End":(A=d.value)==null||A.moveCurrentItemLast();break;case"ArrowLeft":{(h=d.value)!=null&&h.closeSelfAndActiveParent()||(Y=(L=u.value).onKeyFocusMoveLeft)==null||Y.call(L);break}case"ArrowRight":(M=d.value)!=null&&M.openCurrentItemSubMenu()||(oe=(E=u.value).onKeyFocusMoveRight)==null||oe.call(E);break;case"Enter":(s=d.value)==null||s.triggerCurrentItemClick(c);break;default:p=!1;break}p&&d.value&&(c.stopPropagation(),c.preventDefault())}function _(c){u.value.closeWhenScroll!==!1&&j(c.target,null)}function z(c){j(c.target,c)}function j(c,x){for(var W,O;c;){if(c.classList&&c.classList.contains("mx-context-menu"))return;c=c.parentNode}x?u.value.clickCloseOnOutside!==!1?(i(),v()):(O=(W=u.value).onClickOnOutside)==null||O.call(W,x):(i(),v())}return te("globalOptions",u),te("globalCloseMenu",v),te("globalIsFullScreenContainer",r.isFullScreenContainer),te("globalHasSlot",c=>t[c]!==void 0),te("globalRenderSlot",(c,x)=>N(t,c,se({},x),()=>[ie("span","Render slot failed")],!1)),te("menuContext",{zIndex:u.value.zIndex||G.defaultZindex,container:y.value,adjustPadding:{x:0,y:0},getZoom:()=>u.value.zoom||G.defaultZoom,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[u.value.x,u.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),o(S),(c,x)=>n(u).menuTransitionProps?(C(),$(at,Me({key:0,appear:""},n(u).menuTransitionProps,{onAfterLeave:x[0]||(x[0]=W=>f("closeAnimFinished"))}),{default:J(()=>[n(P)?(C(),$(we,{key:0,ref_key:"submenuInstance",ref:m,items:n(u).items,adjustPosition:n(u).adjustPosition,maxWidth:n(u).maxWidth||n(G).defaultMaxWidth,minWidth:n(u).minWidth||n(G).defaultMinWidth,direction:n(u).direction||n(G).defaultDirection},{default:J(()=>[N(c.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):D("",!0)]),_:3},16)):n(P)?(C(),$(we,{key:1,ref_key:"submenuInstance",ref:m,items:n(u).items,adjustPosition:n(u).adjustPosition,maxWidth:n(u).maxWidth||n(G).defaultMaxWidth,minWidth:n(u).minWidth||n(G).defaultMinWidth,direction:n(u).direction||n(G).defaultDirection},{default:J(()=>[N(c.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):D("",!0)}}),il=ne({__name:"ContextMenu",props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},emits:["update:show","close"],setup(e,{expose:o,emit:a}){const r=a,f=e,{options:t,show:m}=ce(f),{isNew:u,container:P,eleId:y}=rt(t.value),S=R(null),T=et();function w(v){var H,k;r("update:show",!1),r("close"),(k=(H=t.value).onClose)==null||k.call(H,v)}return o({closeMenu:()=>r("update:show",!1),isClosed:()=>!m.value,getMenuRef:()=>{var v;return(v=S.value)==null?void 0:v.getMenuRef()},getMenuDimensions:()=>{var H;var v;return(H=(v=S.value)==null?void 0:v.getMenuDimensions())!=null?H:{width:0,height:0}}}),(v,H)=>(C(),$(ot,{to:`#${n(y)}`},[X(it,{ref_key:"menuRef",ref:S,options:n(t),show:n(m),container:n(P),isFullScreenContainer:!n(u),onClose:w},tt({_:2},[lt(n(T),(k,i)=>({name:i,fn:J(d=>[N(v.$slots,i,nt(yt(d)))])}))]),1032,["options","show","container","isFullScreenContainer"])],8,["to"]))}}),cl=ne({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(e,o){const a=K("globalOptions"),{adjustSubMenuPosition:r,maxWidth:f,minWidth:t}=ce(e),m=typeof r.value<"u"?r.value:a.value.adjustPosition,u=R(),P=R();return o.expose({getSubMenuRef:()=>u.value,getMenuItemRef:()=>P.value}),()=>ie(je,ke(se({},e),{ref:P,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof o.slots.default!==void 0}),o.slots.default?se({submenu:y=>ie(we,{ref:u,maxWidth:f.value,minWidth:t.value,adjustPosition:m,parentMenuItemContext:y.context},{default:o.slots.default})},Lt(o.slots,"default")):o.slots)}});function dl(e,o,a,r){const f=R(!0),t=ie(it,{options:e,show:f.value,container:o,isFullScreenContainer:!a,onCloseAnimFinished:()=>{Ee(null,o)},onClose:m=>{var u;(u=e.onClose)==null||u.call(e,m),f.value=!1}},r);return Ee(t,o),t.component}function Qe(e,o){const a=rt(e);return dl(e,a.container,a.isNew,o).exposed}const fl={install(e){e.config.globalProperties.$contextmenu=Qe,e.component("ContextMenu",il),e.component("ContextMenuItem",je),e.component("ContextMenuGroup",cl),e.component("ContextMenuSperator",ge),e.component("ContextMenuSeparator",ge),e.component("ContextSubMenu",we)},showContextMenu(e,o){return Qe(e,o)},isAnyContextMenuOpen(){return Ot()},closeContextMenu:ut,transformMenuPosition:Ht},vl={class:"h-full bg-bg_color overflow-hidden relative",style:{minHeight:"calc(100vh - 141px)"}},ml={class:"flex items-center h-[34px]"},hl=ne({__name:"tree",emits:["tree-select"],setup(e,{emit:o}){const a=o,r=R(),f=R(""),t=R({}),m={children:"children",label:"name"},{isDark:u}=xt(),{treeLoading:P,treeData:y,openDictDialog:S,getDictTreeData:T}=It(),w=(k,i)=>k?`${i.name}（${i.code}）`.includes(k):!0;function v(k){var d,g;const i=k.$treeNodeId;t.value[i]=(d=t.value[i])!=null&&d.highlight?Object.assign({id:i},t.value[i],{highlight:!1}):Object.assign({id:i},t.value[i],{highlight:!0}),Object.values(t.value).forEach(_=>{_.id!==i&&(_.highlight=!1)}),a("tree-select",(g=t.value[i])!=null&&g.highlight?Object.assign(ke(se({},k),{selected:!0})):Object.assign(ke(se({},k),{selected:!1})))}function H(k,{name:i,data:d}){k.preventDefault(),fl.showContextMenu({x:k.x,y:k.y,theme:u.value?"dark":"default",items:[{label:"修改",icon:ie(_e(Rt)),onClick:()=>{S("修改",d)}},{label:"删除",icon:ie(_e(Pt)),onClick:()=>{Mt.confirm(`确定要删除 <strong style='color:var(--el-color-primary)'>${i}</strong> 字典吗?`,"系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,draggable:!0}).then(()=>{T(),St("已成功删除",{type:"success"})})}}]})}return st(f,k=>{r.value.filter(k)}),(k,i)=>{const d=le("IconifyIconOffline"),g=le("el-icon"),_=le("el-input"),z=le("el-divider"),j=le("el-tree"),c=le("el-scrollbar"),x=le("el-button"),W=Ct("loading");return Ke((C(),q("div",vl,[Z("div",ml,[X(_,{modelValue:f.value,"onUpdate:modelValue":i[0]||(i[0]=O=>f.value=O),class:"mx-2",size:"small",placeholder:"请输入字典名称",clearable:""},{suffix:J(()=>[X(g,{class:"el-input__icon"},{default:J(()=>[Ke(X(d,{icon:"ri/search-line"},null,512),[[kt,f.value.length===0]])]),_:1})]),_:1},8,["modelValue"])]),X(z),X(c,{height:"calc(90vh - 150px)"},{default:J(()=>[X(j,{ref_key:"treeRef",ref:r,data:n(y),"node-key":"id",size:"small",props:m,"default-expand-all":"","expand-on-click-node":!1,"filter-node-method":w,onNodeClick:v},{default:J(({node:O,data:F})=>{var V,A,h;return[X(n(Wt),{class:ue(["w-full!","p-1!","mt-2!","mr-2!","rounded","select-none","hover:text-primary",f.value.trim().length>0&&`${O.label}（${F.code}）`.includes(f.value)&&"text-red-500!",(V=t.value[O.id])!=null&&V.highlight?"dark:text-primary!":""]),style:Se({color:(A=t.value[O.id])!=null&&A.highlight?"var(--el-color-primary)":"",background:(h=t.value[O.id])!=null&&h.highlight?"var(--el-color-primary-light-7)":"transparent"}),onContextmenu:L=>H(L,{name:O.label,data:F})},{default:J(()=>[Ve(Be(`${O.label}（${F.code}）`),1)]),_:2},1032,["class","style","onContextmenu"])]}),_:1},8,["data"])]),_:1}),X(x,{class:"w-[90%] absolute bottom-[22px] left-[50%] -translate-x-[50%]",type:"primary",icon:n(_e)(n(_t)),onClick:i[1]||(i[1]=O=>n(S)())},{default:J(()=>i[2]||(i[2]=[Ve(" 新增字典 ")])),_:1},8,["icon"])])),[[W,n(P)]])}}}),_l=wt(hl,[["__scopeId","data-v-4b98bf26"]]);export{_l as default};
