var Q=Object.defineProperty;var y=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var $=(r,n,c)=>n in r?Q(r,n,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[n]=c,f=(r,n)=>{for(var c in n||(n={}))U.call(n,c)&&$(r,c,n[c]);if(y)for(var c of y(n))W.call(n,c)&&$(r,c,n[c]);return r};import{k as C,f as x,h as S,a as p,aZ as w,p as k,X as B,ai as e2,g as M,J as n2,b as R,j as T,F as t2,aj as V}from"./index-Unj4PD6x.js";import{_ as a2}from"./form.vue_vue_type_script_setup_true_lang-uMshNjQG.js";const s2={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",class:"icon",viewBox:"0 0 1024 1024"};function r2(r,n){return x(),C("svg",s2,n[0]||(n[0]=[S("path",{fill:"currentColor",d:"M512 224c-159.06 0-288 128.94-288 288s128.94 288 288 288 288-128.94 288-288-128.94-288-288-288m0 512c-123.71 0-224-100.29-224-224s100.29-224 224-224 224 100.29 224 224-100.29 224-224 224m0-672a32 32 0 0 0-32 32v64a32 32 0 0 0 64 0V96a32 32 0 0 0-32-32m0 768a32 32 0 0 0-32 32v64a32 32 0 0 0 64 0v-64a32 32 0 0 0-32-32M195.22 195.22a32 32 0 0 0 0 45.25l45.25 45.25a32 32 0 0 0 45.25-45.25l-45.25-45.25a32 32 0 0 0-45.25 0m543.05 543.05a32 32 0 0 0 0 45.25l45.25 45.25a32 32 0 0 0 45.25-45.25l-45.25-45.25a32 32 0 0 0-45.25 0M64 512a32 32 0 0 0 32 32h64a32 32 0 0 0 0-64H96a32 32 0 0 0-32 32m768 0a32 32 0 0 0 32 32h64a32 32 0 0 0 0-64h-64a32 32 0 0 0-32 32M195.22 828.78a32 32 0 0 0 45.25 0l45.25-45.25a32 32 0 0 0-45.25-45.25l-45.25 45.25a32 32 0 0 0 0 45.25m543.05-543.05a32 32 0 0 0 45.25 0l45.25-45.25a32 32 0 0 0-45.25-45.25l-45.25 45.25a32 32 0 0 0 0 45.25"},null,-1)]))}const H={render:r2},c2={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",class:"icon",viewBox:"0 0 1024 1024"};function l2(r,n){return x(),C("svg",c2,n[0]||(n[0]=[S("path",{fill:"currentColor",d:"M512 320c164.95 0 298.667 133.717 298.667 298.667 0 63.466-19.798 122.282-53.547 170.666h96.213a42.667 42.667 0 1 1 0 85.334H170.667a42.667 42.667 0 1 1 0-85.334h96.192l-4.48-6.634a297.3 297.3 0 0 1-49.046-164.032C213.333 453.717 347.051 320 512 320m0 85.333c-117.824 0-213.333 95.51-213.333 213.334A213.01 213.01 0 0 0 384 789.333h256a213.01 213.01 0 0 0 85.333-170.666c0-117.824-95.509-213.334-213.333-213.334M960 576a42.667 42.667 0 1 1 0 85.333h-85.333a42.667 42.667 0 1 1 0-85.333zm-810.667 0a42.667 42.667 0 1 1 0 85.333H64A42.667 42.667 0 1 1 64 576zm709.611-304.277a42.667 42.667 0 0 1 0 60.33l-60.33 60.331a42.667 42.667 0 1 1-60.331-60.33l60.33-60.331a42.667 42.667 0 0 1 60.331 0m-633.557 0 60.33 60.33a42.667 42.667 0 1 1-60.33 60.331l-60.331-60.33a42.667 42.667 0 0 1 60.33-60.331M512 128a42.667 42.667 0 0 1 42.667 42.667V256a42.667 42.667 0 1 1-85.334 0v-85.333A42.667 42.667 0 0 1 512 128"},null,-1)]))}const N={render:l2},o2={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",class:"icon",viewBox:"0 0 1024 1024"};function d2(r,n){return x(),C("svg",o2,n[0]||(n[0]=[S("path",{fill:"currentColor",d:"M825.875 627.066c20.988 0 41.238-3.058 60.855-7.593-8.543 29.215-20.46 56.847-35.226 82.687-65.813 114.645-189.317 192.164-331.066 192.164-210.833 0-381.797-170.965-381.797-381.797S309.605 130.73 520.438 130.73c15.925 0 31.535 1.266 46.933 3.165-11.707 13.394-21.937 27.843-31.43 42.925 9.493-14.976 19.723-29.53 31.43-42.925 30.586 3.796 60.012 11.18 87.856 21.726-58.536 49.043-96.61 121.711-96.61 204.082 0 147.656 119.707 267.363 267.258 267.363m-31.957 74.778a322 322 0 0 0 32.062 1.582c-10.863 0-21.515-.633-32.062-1.582m-311.66-342.035c0-61.067 16.77-117.809 44.719-167.485-2.848 4.957-6.012 9.703-8.649 14.871C350.633 208.355 215 344.515 215 512.527c0 168.645 136.793 305.438 305.438 305.438 99.14 0 186.89-47.356 242.683-120.55-159.785-29.532-280.863-169.278-280.863-337.606m0 0"},null,-1)]))}const Y={render:d2};function m2(r){const n=p(),c=p(new Date),j=[{icon:N,text:"早班",color:"#67C23A"},{icon:H,text:"中班",color:"#E6A23C"},{icon:Y,text:"晚班",color:"#409EFF"}],s=w().startOf("month"),d=s.add(1,"month"),t=(a,e=0)=>a.add(e,"day").format("YYYY-MM-DD"),i=p([{id:101,scheduling:"张三",classes:"morning",startDate:t(s,0),endDate:t(s,0),remark:""},{id:102,scheduling:"李四（可跨日期排班）",classes:"noon",startDate:t(s,1),endDate:t(s,4),remark:"值班结束后休息两天"},{id:103,scheduling:"王五",classes:"noon",startDate:t(s,2),endDate:t(s,2),remark:""},{id:104,scheduling:"张三",classes:"morning",startDate:t(s,7),endDate:t(s,7),remark:""},{id:105,scheduling:"赵六（联系电话：15538921234）",classes:"noon",startDate:t(s,7),endDate:t(s,7),remark:""},{id:106,scheduling:"李四",classes:"evening",startDate:t(s,7),endDate:t(s,7),remark:""},{id:107,scheduling:"小李（联系电话：15098702341）",classes:"evening",startDate:t(s,29),endDate:t(s,29),remark:""},{id:201,scheduling:"小张",classes:"evening",startDate:t(d,0),endDate:t(d,0),remark:""},{id:202,scheduling:"小云（联系电话：18812348765）",classes:"morning",startDate:t(d,2),endDate:t(d,2),remark:""},{id:203,scheduling:"小宇（联系电话：18287659890）",classes:"noon",startDate:t(d,2),endDate:t(d,2),remark:""},{id:204,scheduling:"小飞（联系电话：15190908787）",classes:"evening",startDate:t(d,2),endDate:t(d,2),remark:""}]),O=k(()=>a=>{switch(a){case"morning":return{background:"#d9ffd9",color:"#67C23A"};case"noon":return{background:"#fff0bd",color:"#E6A23C"};case"evening":return{background:"#ddeffb",color:"#409EFF"};default:return""}}),z=k(()=>a=>{switch(a){case"morning":return N;case"noon":return H;case"evening":return Y;default:return""}}),J=k(()=>a=>{switch(a){case"morning":return{color:"#67C23A"};case"noon":return{color:"#E6A23C"};case"evening":return{color:"#409EFF"};default:return""}}),D=a=>new Date(a).setHours(0,0,0,0),X=a=>{const e=D(a);return i.value.filter(g=>{const m=D(g.startDate),v=g.endDate?D(g.endDate):m;return e>=m&&e<=v})},Z=a=>{r.value&&(r.value.selectDate(a),a==="today"&&(c.value=new Date))};function q(a,e){return`${{morning:"早班",noon:"中班",evening:"晚班"}[e.classes]}/${a}/${e.scheduling}`}function G(a,e){a==="current-month"&&A("修改",e)}function A(a="新增",e){var E,F,I,b,_;e2({title:`${a}排班`,props:{formInline:{scheduling:(E=e==null?void 0:e.scheduling)!=null?E:"",classes:(F=e==null?void 0:e.classes)!=null?F:"morning",startDate:(I=e==null?void 0:e.startDate)!=null?I:"",endDate:(b=e==null?void 0:e.endDate)!=null?b:"",remark:(_=e==null?void 0:e.remark)!=null?_:""}},width:"32%",draggable:!0,fullscreen:B(),fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>n2(a2,{ref:n,formInline:null}),footerRenderer:({options:l,index:o})=>M(t2,null,[a==="修改"?M(R("el-button"),{type:"danger",onClick:()=>g(e,l,o)},{default:()=>[T("删除排班")]}):null,M(R("el-button"),{type:"primary",onClick:()=>K(a,l.props.formInline,e,l,o)},{default:()=>[T("确定")]})])});function g(l,o,u){i.value=i.value.filter(h=>h.id!==l.id),V(o,u)}function m(){return Math.floor(Math.random()*99701)+300}function v(l,o){const u=i.value.findIndex(h=>h.id===l);u!==-1&&(i.value[u]=f(f({},i.value[u]),o))}function K(l,o,u,h,L){n.value.getRef().validate(P=>{P&&(l==="新增"?i.value.push(f({id:m()},o)):v(u.id,o),V(h,L))})}}return{date:c,legends:j,getScheduleTagStyle:O,getScheduleTagIcon:z,getScheduleTagIconColor:J,deviceDetection:B,getScheduling:X,selectDate:Z,formatSchedule:q,onSchedulingClick:G,openDialog:A}}export{m2 as useSchedule};
